{% extends 'base.html' %}
{% load static %}

{% block title %}Following Users{% endblock %}

{% block content %}
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-2xl font-bold mb-6">People You Follow</h1>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for follow in following_users %}
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center space-x-4">
                        <!-- Profile Picture -->
                        {% if follow.followed_user.profile_picture %}
                            <img src="{{ follow.followed_user.profile_picture.url }}"
                                 alt="{{ follow.followed_user.username }}'s profile"
                                 class="w-8 h-8 rounded-full object-cover">
                        {% else %}
                            <div class="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center">
                                <span class="text-sm text-gray-500">{{ follow.followed_user.username|make_list|first|upper }}</span>
                            </div>
                        {% endif %}

                        <div class="flex-1">
                            <!-- User Name -->
                            <h2 class="text-xl font-semibold">
                                <a href="{% url 'users:chef-profile' follow.followed_user.id %}"
                                   class="hover:text-blue-600">
                                    {{ follow.followed_user.username }}
                                </a>
                            </h2>

                            <!-- Recipe Count -->
                            <p class="text-gray-600">
                                {{ follow.followed_user.created_recipes.count }} recipes
                            </p>
                        </div>

                        <!-- Follow Button -->
                        <button class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-400"
                                id="follow-button"
                                data-user-id="{{ follow.followed_user.id }}"

                                onclick="{toggleFollow({{ follow.followed_user.id }}, this)}">
                            Unfollow
                        </button>
                    </div>
                </div>
            {% empty %}
                <div class="col-span-full text-center py-8">
                    <p class="text-gray-500">You're not following anyone yet.</p>
                    <a href="{% url 'explore_users' %}" class="text-blue-600 hover:underline mt-2 inline-block">
                        Discover people to follow
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>

{% endblock %}

{% block extra_scripts %}
    <script src="{% static 'users/js/follow.js' %}"></script>
{% endblock %}